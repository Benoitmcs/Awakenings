<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>How Exercise and Nutrition Transform Psychiatry - Awakenings Mental Health</title>

  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <!-- original styles and any inline CSS below -->
  <style>
    :root {
      --primary: #2F3E46;
      --accent: #E07A5F;
      --bg-light: #f1f1f2;
      --text-dark: #1c1c1c;
      --heading-color: #27296d;
      --theme-blue-static: #27296d;
      --bg-dark: #1D2021;
      --text-light: #F0F3F4;
    }

    html.dark {
      --bg-light: var(--bg-dark);
      --text-dark: var(--text-light);
      --heading-color: var(--text-light);
    }

    html.dark .testimonial-card { background: #2c3032; }
    html.dark .card:not(.no-dark-override){ 
        background: #272b2c; 
        box-shadow: 0 4px 12px rgba(0,0,0,0.3); 
    }
    html.dark .card header,
    html.dark .accordion .acc-header,
    html.dark .btn, html.dark .btn.secondary, 
    html.dark #to-top {
        background: var(--theme-blue-static); 
        color: white; 
    }
    html.dark .accordion .acc-header.active {
        background: var(--accent);
    }
    html.dark .accordion .acc-body { background: #2c3032; }
    html.dark .skeleton { background: #444; }
    html.dark .separator path { fill: var(--bg-dark); } 
    
    html.dark .btn:active, html.dark .btn.secondary:active, html.dark #to-top:active {
        background-color: var(--bg-dark); 
        color: var(--text-light);    
    }
    html.dark footer#contact { 
        color: var(--text-light);
        background-color: var(--bg-dark); 
    }
    html.dark footer#contact .footer-text-content a {
        color: var(--accent); 
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Inter', sans-serif; 
      background: var(--bg-light); color: var(--text-dark);
      line-height: 1.6; transition: background .3s, color .3s;
      overflow-x: hidden; 
    }
    header#site-header {
      position: fixed; top: 0; left: 0; width: 100%;
      /* Sketch image moved to ::before pseudo-element */
      background-color: transparent; /* Ensure initial background is transparent */
      display: flex; align-items: center; 
      /* background-image transition removed, handled by ::before opacity */
      /* background-color transition removed, will be handled by JS */
      transition: box-shadow 0.15s ease, height 0.05s ease; /* Removed justify-content from transition */
      z-index: 1000; padding: 0 1rem; 
      justify-content: flex-start; /* Default to flex-start for h1 positioning */
    }

    /* New pseudo-element for the sketch image background */
    header#site-header::before {
      content: '';
      position: absolute;
      inset: 0;
      background: url('Wide Awakenings Building Sketch.png') center/cover no-repeat;
      opacity: var(--header-bg-image-opacity, 1); /* Use CSS variable */
      transition: opacity 0.3s ease;
      z-index: -2; /* Behind the ::after overlay and content */
    }

    header#site-header::after { 
      content: ''; position: absolute; inset: 0;
      background: rgba(47,62,70,0.2); /* Overlay for the sketch */
      z-index: -1; /* Above ::before, below content */
      transition: opacity 0.3s ease; 
      opacity: var(--header-bg-overlay-opacity, 1); /* Use CSS variable */
    }
    /* :not(.scrolled-header-layout) no longer needed for justify-content */
    
    .scrolled-header-layout {
      /* justify-content: space-between !important; -- No longer needed here for h1, nav is absolute */
      align-items: center !important; 
      /* background-image: none; -- No longer needed, ::before opacity handles this */
      /* background-color: var(--theme-blue-static); -- Removed, JS will handle background color animation */
      box-shadow: 0 2px 8px rgba(0,0,0,.2);
    }

    /* When scrolled, fade out the sketch image and its overlay */
    /* .scrolled-header-layout::before,
    .scrolled-header-layout::after {
        opacity: 0; 
    } */

    header#site-header h1 {
      position: relative; 
      font-family: 'Dancing Script', cursive; font-weight: 600;
      z-index: 1; 
      margin: 0; 
      display: flex; 
      align-items: center; 
      /* transition for properties changed by JS/scroll - background-color and padding removed as JS will handle them */
      transition: font-size 0.3s ease, color 0.3s ease;
    }

    /* Base styles for H1, including the rounded box properties */
    header#site-header h1 {
      font-size: 3.2rem; /* Initial font size */
      background-color: rgba(220, 220, 220, 0.85); /* Initial silverish background */
      padding: 0.5rem 1rem; /* Constant padding for the box */
      border-radius: 8px; /* Constant border-radius */
      color: var(--theme-blue-static); /* Initial text color */
      box-shadow: 0 2px 5px rgba(0,0,0,0.1); /* Initial shadow for the box */
      /* position: relative; font-family, z-index etc. are already set above */
    }

    /* Styles for H1 when header is scrolled (mostly handled by JS now) */
    .scrolled-header-layout h1 {
      /* font-size will be interpolated by JS */
      /* line-height: 1.2; */ /* Can be kept or removed if JS handles size well */
      /* color will be interpolated by JS to white */
      text-align: left; /* Keep this for final state */
      /* background-color will be interpolated to transparent by JS */
      /* padding is now constant */
      box-shadow: none; /* Remove box shadow in scrolled state */
    }

    .header-favicon {
      display: inline-block; 
      opacity: 0; 
      /* width and height will be controlled by JS */
      margin-right: 10px; 
      vertical-align: middle; 
    }
    header#site-header h1 .title-short { 
      display: inline-block; 
      opacity: 0; 
      vertical-align: middle;
    }
    header#site-header h1 .title-full { 
      display: inline-block;
      opacity: 1; 
      vertical-align: middle;
    }

    header#site-header nav { 
      position: absolute; 
      top: 1rem; /* Default unscrolled top */
      right: 1rem; /* Default unscrolled right */
      z-index: 1002; 
      display: flex; 
      align-items: center; /* Vertically center links within the nav block */
      gap: 0.6rem; /* Consistent gap */
      transition: top 0.3s ease, right 0.3s ease, opacity 0.3s ease; /* For smooth movement */
    }
    .scrolled-header-layout nav { 
      /* position: absolute; is inherited */
      /* display: flex; align-items: center; gap: 0.6rem; are inherited */
      /* top and right will be controlled by JavaScript for scrolled state */
      /* height: 100%; removed as it's not needed with absolute positioning and calculated top */
    }
    nav .nav-link { 
      text-decoration: none; font-family: 'Inter', sans-serif; 
      font-weight: 600; font-size: 1.6rem; /* 50% of 3.2rem title */
      white-space: nowrap;
      line-height: 1.2; 
      padding: 0.4em 0.8em; /* Padding for bubble effect */
      display: inline-block; 
      border-radius: 25px; /* Rounded bubbles */
      background-color: rgba(220, 220, 220, 0.3); /* Light bubble background for unscrolled */
      color: var(--theme-blue-static); /* Text color for unscrolled */
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
      transition: background-color 0.3s ease, color 0.3s ease, box-shadow 0.3s ease;
    }
    .scrolled-header-layout nav .nav-link { 
        color: white !important;
        background-color: rgba(255, 255, 255, 0.25); /* Slightly different bubble for scrolled */
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    nav .nav-link:hover { 
      color: var(--accent); 
      background-color: rgba(255, 255, 255, 0.4);
      box-shadow: 0 3px 6px rgba(0,0,0,0.15);
    }

    h2 { 
      font-family: 'Dancing Script', cursive; font-weight: 600;
      color: var(--heading-color);
      text-align: center; 
      margin-bottom: 2rem; 
      font-size: 2.2rem; 
    }
    #testimonials h2, #location h2, #booking h2, 
    #services h2, 
    #insurance h2 { 
        font-size: 2.2rem; 
        margin-bottom: 2rem; 
        text-align: center; 
    }
    #location h2 { text-align: center; }

    /* All specific nav-link font sizes for desktop scrolled are removed, base 1.6rem applies */

    .container { 
      max-width: 1000px; margin: 0 auto; 
      padding: 2rem 1rem 100px; 
    }
    .grid-2 { display: grid; grid-template-columns: repeat(auto-fit,minmax(280px,1fr)); gap: 2rem; align-items: start; margin-bottom: 3rem; }
    .card { background: var(--bg-light); border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); overflow: hidden; }
    .card.no-dark-override {}
    .card header { 
      padding: 1rem; 
      background: var(--theme-blue-static); 
      color: white; 
      font-family: 'Dancing Script', cursive; font-weight: 600; font-size: 1.4rem; 
    }
    #services .card header { text-align: center; } 
    .card .content { padding: 1rem; }
    .btn { 
      display: inline-block; 
      background: var(--theme-blue-static); 
      color: white; 
      padding: 0.75rem 1.5rem; border-radius: 4px; text-decoration: none; 
      font-weight: 600; margin: 0.5rem; 
      transition: background-color .2s, color .2s, opacity .3s; 
    }
    .btn.secondary { 
      background: var(--theme-blue-static); 
    }
    .btn:hover { opacity: .9; }
    .btn:active, .btn.secondary:active { 
        background-color: var(--bg-light); 
        color: var(--theme-blue-static);    
        opacity: 1;
    }
    .booking-button-container { padding: 1rem; }
    .separator { display: block; width: 100%; height: 80px; }
    .separator path { transition: fill .3s; } 
    .accordion .acc-header { 
      background: var(--theme-blue-static); 
      color: white; cursor: pointer; 
      padding: 1rem; border: none; width: 100%; text-align: left; 
      outline: none; font-family: 'Inter', sans-serif; 
      font-weight: 600; font-size: 1.1rem; 
      transition: background .3s; 
    }
    .accordion .acc-header.active { background: var(--accent); }
    .accordion .acc-header + .acc-body + .acc-header { margin-top: 0.5rem; }
    .accordion .acc-body { max-height: 0; overflow: hidden; transition: max-height .3s ease; background: white; padding: 0 1rem; }
    .accordion .acc-body p { padding: 1rem 0; }
    .skeleton { background: #ddd; position: relative; }
    #testimonials { padding: 2rem 0; }
    .testimonial-card { background: white; border-radius: 8px; padding: 1.5rem; box-shadow: 0 4px 12px rgba(0,0,0,0.05); font-style: italic; text-align: center; margin-bottom: 1.5rem; max-width: 650px; margin-left: auto; margin-right: auto; }
    .testimonial-card:last-child { margin-bottom: 0; }
    #to-top { 
      position: fixed; bottom: 2rem; right: 2rem; 
      background: var(--theme-blue-static); 
      border: none; color: white; 
      padding: 0.75rem; border-radius: 50%; font-size: 1.2rem; 
      cursor: pointer; opacity: 0; 
      transition: background-color .2s, opacity .3s; 
      z-index: 10001; 
    }
    #to-top:active { 
        background-color: var(--bg-light); 
        color: var(--theme-blue-static);    
        opacity: 1;
    }
    body.scrolled #to-top { opacity: 1; } 
    section#location address { text-align: center; margin-top: 0.5rem; }
    
    footer#contact {
        text-align:center; 
        padding: 2rem 1rem 1rem; 
        background-color: var(--bg-light); 
        position: relative;
        color: var(--text-dark); 
    }
    .footer-logo-container { 
        margin-bottom: 1.5rem; 
    }
    .footer-logo-container img {
        max-width: 250px; 
        height: auto;
        display: block; 
        margin: 0 auto; 
    }
    .footer-text-content { 
        padding: 0; 
    }
    html.dark footer#contact { 
        background-color: var(--bg-dark); 
        color: var(--text-light); 
    }
    
    footer#contact p {
        margin-bottom: 0.5rem;
    }
    footer#contact p:last-child {
        margin-bottom: 0;
    }
    footer#contact a {
        color: var(--accent); 
    }

    /* .mobile-menu-button class is no longer used by the new icon link. 
       Keeping it commented out or removing it. For now, let's effectively remove it by commenting.
    .mobile-menu-button {
      display: none; 
      background-color: transparent;
      border: none;
      color: #fff;
      font-size: 28px; 
      padding: 0.25rem 0.5rem; 
      cursor: pointer;
      line-height: 1; 
      align-self: center; 
    }
    */

    /* ======================== MOBILE OPTIMISATIONS (<600px) ======================== */
    @media (max-width: 600px) {
      header#site-header nav#main-nav { /* Target main-nav specifically for mobile override */
        position: static; /* Remove absolute positioning from desktop rules */
        display: block;   /* Change from flex to block, simplifies layout */
        width: 100%;      /* Ensure it can contain a full-width child if needed */
        height: auto;     /* Let content define height, or 0 if purely pass-through */
        top: auto;        /* Reset desktop positioning */
        right: auto;      /* Reset desktop positioning */
        z-index: auto;    /* Reset desktop z-index */
        gap: 0;           /* Reset desktop gap */
        /* Clear any transitions that might be inherited from desktop */
        transition: none; 
      }

      header#site-header {
        position: sticky; /* Retain sticky behavior */
        top: 0;
        /* height: 80px; Let content define height with padding */
        background-color: var(--theme-blue-static); /* Header bar background */
        box-shadow: 0 2px 6px rgba(0,0,0,.16);
        padding: 0.5rem 0.75rem; /* Consistent padding */
        z-index: 2000;
        display: flex; 
        justify-content: space-between; 
        align-items: center; 
        position: relative; /* For absolute positioning of icon and dropdown */
      }
      header#site-header h1 { /* This is the "logo" part */
        font-size: 1.6rem;
        background: transparent; /* h1 itself is transparent, header bar has color */
        color: #fff;
        box-shadow: none;
        padding: 0.4rem 0; /* Vertical padding, no horizontal as header has it */
        border-radius: 0;
        margin: 0; /* Remove default margin */
        display: flex; /* Align icon and text within h1 */
        align-items: center;
        flex-grow: 1; /* Allow it to take space */
      }
      .title-secondary-words { display: none; }
      .header-favicon { 
        width: 36px; 
        height: 36px; 
        margin-right: 8px; 
        opacity: 1 !important; 
      }
      
      /* Hide the old mobile-menu-button if it was ever displayed by other rules */
      .mobile-menu-button { /* This was the old button, ensure it's hidden */
        display: none !important;
      }

      /* Styling for the new Font Awesome icon link */
      .mobile-menu-icon {
        display: block; /* Make it visible on mobile */
        background: transparent; /* Or a subtle background like var(--accent) if preferred */
        color: white;
        padding: 10px 12px; /* Clickable area */
        text-decoration: none;
        font-size: 22px; /* Size of the fa-bars icon */
        position: absolute;
        right: 0.75rem; /* Align with header padding */
        top: 50%;
        transform: translateY(-50%);
        cursor: pointer;
      }
      .mobile-menu-icon:hover {
        background-color: var(--accent); /* Hover effect */
        color: white;
      }
      
      /* Container for the dropdown links */
      #mobile-nav-links {
        display: none; /* Hidden by default, toggled by JS */
        position: absolute;
        top: 100%; /* Position it right below the header */
        left: 0;
        right: 0;
        background-color: var(--theme-blue-static); /* Dropdown background */
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        z-index: 1990; /* Below header, above main content */
      }

      #mobile-nav-links .nav-link {
        display: block;
        color: white;
        padding: 14px 16px;
        text-decoration: none;
        font-size: 17px;
        text-align: left; /* As per example, or center */
        border-bottom: 1px solid rgba(255, 255, 255, 0.1); /* Separator */
        background-color: transparent; /* Remove individual link background */
      }
      #mobile-nav-links .nav-link:last-child {
        border-bottom: none;
      }
      #mobile-nav-links .nav-link:hover {
        background-color: var(--accent); /* Use accent for hover */
        color: white;
      }

      main.container { padding-top: 70px; } /* Adjust if header height changed */
    }
  </style>
</head>
<body>
  <header id="site-header" class="banner">
    <h1 data-aos="fade-down">
      <img src="Square Logo.png" alt="Awakenings Logo" class="header-favicon">
      <span class="title-main-word">Awakenings</span>
      <span class="title-secondary-words">Mental&nbsp;Health</span>
    </h1>
    <a href="javascript:void(0);" class="icon mobile-menu-icon" onclick="toggleMobileMenu()"><i class="fa fa-bars"></i></a>
    <nav id="main-nav">
      <div id="mobile-nav-links">
        <a href="index.html" class="nav-link" target="_top">Home</a>
      <a href="our-providers.html" class="nav-link" target="_top">Our Providers</a>
      <a href="articles.html" class="nav-link" target="_top">Articles</a>
      </div>
    </nav>
  </header>
  <main class="container">
    <svg class="separator" viewBox="0 0 1200 100" preserveAspectRatio="none" data-aos="fade-up">
      <path d="M0,0 C300,100 900,0 1200,100 L1200,0 L0,0 Z" fill="var(--bg-light)"/>
    </svg>
    <article class="blog-article">
      <header class="blog-article-header" data-aos="fade-up">
        <h1 class="blog-article-title">How Exercise and Nutrition Transform Psychiatry</h1>
        <p class="blog-article-subtitle" data-aos-delay="100">
          "If something is worth doing, it is worth doing badly." -G.K. Chesterson
        </p>
      </header>
      
      <div class="blog-article-main-content-wrapper"> <!-- New outer wrapper -->
        <section class="blog-article-content" data-aos="fade-up" data-aos-delay="200">
          <!-- Old inner wrapper div removed -->
          <p>At Awakenings, we often remind our patients that the path to wellness doesn't begin with perfection, it begins with intention. One of the most powerful ways to support psychiatric treatment isn't found in a bottle it's in your daily habits like movement and mindful eating.</p>
          <p>It's easy for nutrition and exercise to sound overwhelming, especially when you're already struggling to find energy or motivation, but here’s what we want you to know: starting a diet or exercise routine doesn’t need to be dramatic to be effective. In fact, the smallest step is often the most powerful.</p>

          <h3>Medications Work Better When You Support Them</h3>
          <div class="image-text-container">
            <div class="image-container float-right">
              <img src="Food.png" alt="Healthy food options">
            </div>
            <p>Many types of medications we prescribed throughout psychiatry are affected by what and how you eat. For example, some antipsychotics require 500+ calories shortly before or after taking them for full absorption. Medications like trazodone are more effective when taken on an empty stomach. Certain foods (like grapefruit) and habits (like high-fat breakfasts) can delay or reduce medication absorption. Nicotine consumption, especially from tobacco, can change how some psychiatric drugs are processed although this is marginally less impactful today with the lessening of tobacco consumption than in recent history. All of this isn't to say that you always have to follow strict rules to get anything out of your medications, however, It's always important to understand how fueling our body can directly impact both the medications we take and our general mental health.</p>
          </div>
          
          <h3>Exercise as a Prescription</h3>
          <p>When we talk to patients about exercise, we don’t mean hitting the gym six days a week. We mean finding something that feels doable and showing up for it, whatever that looks like. Like walking around the block, yoga at home, dance, swimming, or even gardening. What's really important is starting, for some people we recommend making changes as small as possible, even parking at the back of the Walmart parking lot can get you an extra two hundred steps or standing up while you work or watch tv can be enough to start. In the context of psychiatry, we aren't necessarily chasing a "perfect body" or a six-pack, it's about supporting your brain with the boosts to mood, cognition, and productivity that exercise brings.</p>
          <p>If you're struggling to get started, here's some of the best advice we give to our patients. Firstly, sharing our goals with our loved ones increases the chances we'll follow through, and you may discover that your friends and family want to participate with you which further increases your likelihood of success. If you can't find a buddy, it may be worth looking into getting a coach/trainer, these people's lives revolve around being able to help you get started and stay consistent. Finally, focus on what you enjoy doing, not what is the "best" for you on paper. Finding something you love doing makes you more likely to do it consistently, which outweighs any marginal benefit between differences in exercise selection.</p>
          <p class="blog-article-blockquote">Bonus: Reframing exercise as a prescription can be helpful for some people, think of your daily walk around the block as something that you do because you know it has a positive impact on your life similarly to how you take your medications because they have a positive impact on your life.</p>

          <h3>Medication is a Tool, Not the Whole Toolbox</h3>
          <div class="image-text-container reverse">
            <div class="image-container float-right">
              <img src="People.png" alt="Group of diverse people">
            </div>
            <p>Yes, medication can help, especially taken in the correct context. Sometimes, it’s exactly what someone needs to begin moving forward. But it’s just one tool. Over time, many of our patients find that as their nutrition and activity improve, their need for higher doses, or even certain medications altogether, can begin to diminish.</p>
            <p>Our goal at Awakenings isn’t just symptom management. It’s empowered, sustainable wellness. And that starts with small, consistent changes—no matter how imperfect.</p>
          </div>
          <p class="blog-article-blockquote">"If something is worth doing, it is worth doing badly." -G.K. Chesterson</p>
          <p>Even the smallest effort is still a step forward.</p>
        <!-- Old inner wrapper div removed -->
        </section> <!-- End of blog-article-content section -->

        <section class="blog-article-cta" data-aos="fade-up"> <!-- CTA is now inside the new main wrapper -->
          <p>Need Help Starting? If you’re not sure where to begin, we’re here to support you. For medication management and support, Awakenings Mental Health is committed to walking with you, step by imperfect step. Click the button below to get an appointment on your schedule today!</p>
          <a href="https://docs.google.com/forms/d/e/1FAIpQLSeeYABYxDoscWL3jH-SNU51X0hgomcb0bEqshRIUnCRg7aSgA/viewform" class="btn secondary" target="_blank" rel="noopener noreferrer"> Appointment Interest Form </a>
        </section>
      </div> <!-- New main wrapper closes here -->
    </article>
    <svg class="separator" viewBox="0 0 1200 100" preserveAspectRatio="none"> <path d="M0,100 C300,0 900,100 1200,0 L1200,100 L0,100 Z" fill="var(--bg-light)"/> </svg>
  </main>
  <button id="to-top">▲</button>
  <footer id="contact" data-aos="fade-up">
    <div class="footer-logo-container">
      <img src="Rectangle Logo.jpg" alt="Awakenings Mental Health Logo">
    </div>
    <div class="footer-text-content">
      <p>© <span id="current-year"></span> Awakenings Mental Health</p>
      <p>Questions? <a href="mailto:admin@awakeningsmentalhealth.com">admin@awakeningsmentalhealth.com</a> <a href="tel:2082950297">(208) 295-0297</a></p>
    </div>
  </footer>
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script>
    // Init AOS & current year
    document.getElementById('current-year').textContent = new Date().getFullYear();
    AOS.init({ duration: 600, once: true, disable: () => window.matchMedia('(max-width: 600px)').matches });

    // Smooth scroll to top
    document.getElementById('to-top').addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    // Early exit for mobile in the heavy scroll animation
    function updateHeaderStylesOnScroll(scrollY) {
      if (window.matchMedia('(max-width: 600px)').matches) return;
      
      if (!siteHeader || !h1Title || !mainContainer) return;

      let progress = 0;
      if (scrollY <= animationScrollStart) {
        progress = 0;
      } else if (scrollY >= animationScrollEnd) {
        progress = 1;
      } else {
        progress = (scrollY - animationScrollStart) / (animationScrollEnd - animationScrollStart);
      }
      progress = Math.max(0, Math.min(1, progress));

      requestAnimationFrame(() => {
        // Get initial h1 width when progress is 0 for accurate centering calculation later
        // This assumes h1 content doesn't drastically change width before this animation starts
        const h1InitialOffsetWidth = h1Title.offsetWidth; 
        const siteHeaderWidth = siteHeader.offsetWidth;

        // Adjust initialHeaderHeightVh for mobile
        const currentInitialHeaderHeightVh = window.innerWidth <= 480 ? 20 : initialHeaderHeightVh; // Use 20vh for mobile

        const initialHeaderActualHeight = (currentInitialHeaderHeightVh / 100) * window.innerHeight;
        const currentHeaderHeight = interpolateValue(initialHeaderActualHeight, finalHeaderHeightPx, progress);
        siteHeader.style.height = `${currentHeaderHeight}px`;
        mainContainer.style.paddingTop = `${currentHeaderHeight}px`; // Dynamically set padding

        // Determine the actual initial H1 font size based on CSS for unscrolled state
        let actualUnscrolledH1FontSizeRem;
        if (window.innerWidth <= 480) {
            actualUnscrolledH1FontSizeRem = 1.8; // As per CSS: @media (max-width: 480px) header#site-header:not(.scrolled-header-layout) h1
        } else {
            actualUnscrolledH1FontSizeRem = initialH1FontSizeRem; // This is 3.2rem, from JS vars, matches CSS for desktop
        }

        let targetFinalH1FontSize = window.innerWidth <= 480 ? finalH1MobileFontSizeRem : finalH1DesktopFontSizeRem;
        let currentH1FontSize;

        if (window.innerWidth <= 480) {
            const shrinkStartProgress = 0.1;
            const shrinkEndProgress = 0.6;
            const shrinkAmountRem = 0.2;

            // Font size that the general interpolation (actualUnscrolled to targetFinal) would achieve at shrinkStartProgress
            const baseSizeAtShrinkStart = interpolateValue(actualUnscrolledH1FontSizeRem, targetFinalH1FontSize, shrinkStartProgress);
            
            if (progress < shrinkStartProgress) {
                // Interpolate from actual unscrolled size towards the size it's supposed to be just before the special shrink phase begins.
                // The progress here is normalized for this segment (0 to shrinkStartProgress).
                currentH1FontSize = interpolateValue(actualUnscrolledH1FontSizeRem, baseSizeAtShrinkStart, progress / shrinkStartProgress);
            } else if (progress >= shrinkStartProgress && progress <= shrinkEndProgress) {
                // During the special shrink phase
                // The font size starts at baseSizeAtShrinkStart and ends at baseSizeAtShrinkStart - shrinkAmountRem.
                const targetSizeAtShrinkEnd = baseSizeAtShrinkStart - shrinkAmountRem;
                // Progress normalized for this segment (shrinkStartProgress to shrinkEndProgress).
                const phaseProgress = (progress - shrinkStartProgress) / (shrinkEndProgress - shrinkStartProgress);
                currentH1FontSize = interpolateValue(baseSizeAtShrinkStart, targetSizeAtShrinkEnd, phaseProgress);
            } else { // progress > shrinkEndProgress
                // After the special shrink phase
                // The font size at the end of the shrink phase was baseSizeAtShrinkStart - shrinkAmountRem.
                const fontSizeAfterShrink = baseSizeAtShrinkStart - shrinkAmountRem;
                // Interpolate from this shrunken size towards the overall targetFinalH1FontSize.
                // Progress normalized for this segment (shrinkEndProgress to 1.0).
                const phaseProgress = (1.0 - shrinkEndProgress === 0) ? 1 : (progress - shrinkEndProgress) / (1.0 - shrinkEndProgress); // Avoid division by zero if shrinkEndProgress is 1
                currentH1FontSize = interpolateValue(fontSizeAfterShrink, targetFinalH1FontSize, phaseProgress);
            }
        } else {
            // Desktop behavior: simple interpolation from its unscrolled size to its final scrolled size.
            currentH1FontSize = interpolateValue(actualUnscrolledH1FontSizeRem, targetFinalH1FontSize, progress);
        }
        h1Title.style.fontSize = `${currentH1FontSize}rem`;
        
        // Text box background opacity: fades 15% faster
        const backgroundOpacityProgress = Math.min(1, progress / 0.85);
        h1Title.style.backgroundColor = `rgba(220, 220, 220, ${interpolateValue(0.85, 0, backgroundOpacityProgress)})`;

        // Animate padding-right of the h1 text box to shrink its right side
        const paddingAnimationStartProgress = 0.6;
        const paddingAnimationEndProgress = 0.9;
        let currentPaddingRightRem;
        const rootFontSizePx = parseFloat(getComputedStyle(document.documentElement).fontSize);

        if (progress < paddingAnimationStartProgress) {
            currentPaddingRightRem = 1; // Default right padding (from initial 0.5rem 1rem)
        } else if (progress >= paddingAnimationEndProgress) {
            currentPaddingRightRem = 0.5; // Target final right padding
        } else {
            // Calculate progress specifically for this padding animation phase
            const paddingSpecificProgress = (progress - paddingAnimationStartProgress) / (paddingAnimationEndProgress - paddingAnimationStartProgress);
            // Initial padding for this animation phase includes the width of secondary words
            let initialPaddingForAnimationRem = 1; // Base right padding
            if (rootFontSizePx > 0 && lastKnownSecondaryWordsWidth > 0) {
                initialPaddingForAnimationRem += (lastKnownSecondaryWordsWidth / rootFontSizePx);
            }
            currentPaddingRightRem = interpolateValue(initialPaddingForAnimationRem, 0.5, paddingSpecificProgress);
        }
        h1Title.style.paddingRight = `${currentPaddingRightRem}rem`;
        // padding-left, top, bottom remain as set in CSS (0.5rem top/bottom, 1rem left initially, then padding-right changes)

        // Animation for titleSecondaryWords ("Mental Health")
        const secondaryFadeStartProgress = 0.1; // Start fading "Mental Health" a bit after scroll starts
        const secondaryFadeEndProgress = 0.6;   // "Mental Health" fully faded by this point
        let secondaryOpacity = 1;

        if (progress <= secondaryFadeStartProgress) {
            secondaryOpacity = 1;
        } else if (progress >= secondaryFadeEndProgress) {
            secondaryOpacity = 0;
        } else {
            secondaryOpacity = 1 - ((progress - secondaryFadeStartProgress) / (secondaryFadeEndProgress - secondaryFadeStartProgress));
        }
        
        if (titleSecondaryWords) {
            titleSecondaryWords.style.opacity = secondaryOpacity;
            if (secondaryOpacity <= 0.01) {
                titleSecondaryWords.style.display = 'none';
            } else {
                titleSecondaryWords.style.display = 'inline-block';
                lastKnownSecondaryWordsWidth = titleSecondaryWords.offsetWidth; // Capture width when visible
            }
        }

        // Favicon: Fades in as "Mental Health" fades out, or slightly delayed
        const faviconFadeStartProgress = 0.2; 
        const faviconFadeEndProgress = 0.7;
        let faviconOpacity = 0;

        if (progress <= faviconFadeStartProgress) {
            faviconOpacity = 0;
        } else if (progress >= faviconFadeEndProgress) {
            faviconOpacity = 1;
        } else {
            faviconOpacity = (progress - faviconFadeStartProgress) / (faviconFadeEndProgress - faviconFadeStartProgress);
        }

        if (headerFavicon) {
            headerFavicon.style.opacity = faviconOpacity;
            const currentFaviconSize = interpolateValue(initialFaviconSizePx, finalFaviconSizePx, faviconOpacity); // Link size to its own opacity progress
            headerFavicon.style.width = `${currentFaviconSize}px`;
            headerFavicon.style.height = `${currentFaviconSize}px`;
            if (faviconOpacity > 0.01) {
                headerFavicon.style.display = 'inline-block';
            } else {
                headerFavicon.style.display = 'none';
            }
        }
        
        // Ensure titleMainWord is always displayed (it doesn't fade itself, its container h1 changes color)
        if (titleMainWord) {
            titleMainWord.style.display = 'inline-block'; // Ensure it's always visible
            // Opacity for titleMainWord could be 1, or tied to overall progress if a subtle fade-in is desired for it
            // For now, let's assume it's always fully opaque relative to its container.
        }

        // Set CSS variables for pseudo-element opacity (sketch background)
        siteHeader.style.setProperty('--header-bg-image-opacity', 1 - progress);
        siteHeader.style.setProperty('--header-bg-overlay-opacity', 1 - progress);
        
        // Animate header background color (to solid blue)
        const themeBlueStaticRGB = hexToRgb(getComputedStyle(document.documentElement).getPropertyValue('--theme-blue-static').trim());
        siteHeader.style.backgroundColor = `rgba(${themeBlueStaticRGB[0]}, ${themeBlueStaticRGB[1]}, ${themeBlueStaticRGB[2]}, ${progress})`;

        // H1 text color transitions from initial (blue) to final (white)
        h1Title.style.color = interpolateRgbColor(initialH1ColorRgb, finalH1ColorRgb, progress);

        // Animate H1 horizontal position using translateX, from centered to flex-start position
        if (h1Title && siteHeaderWidth > 0 && h1InitialOffsetWidth > 0) {
            const siteHeaderPaddingLeft = parseFloat(getComputedStyle(siteHeader).paddingLeft) || 0;
            // Calculate the offset needed to center h1 from its natural flex-start position
            const translateXForCentering = (siteHeaderWidth / 2) - (h1InitialOffsetWidth / 2) - siteHeaderPaddingLeft;
            
            // Interpolate translateX from this centering offset down to 0 (natural flex-start position)
            const currentTranslateX = interpolateValue(translateXForCentering, 0, progress);
            h1Title.style.transform = `translateX(${currentTranslateX}px)`;
        }
        
        // Apply scrolled-header-layout class for box-shadow on header (and potentially nav if it wasn't absolute)
        if (progress > 0.5) { // Threshold for applying scrolled class (e.g., for box-shadow)
          siteHeader.classList.add('scrolled-header-layout');
          if (navElement) {
            navElement.style.top = '1.3rem'; // Raised slightly: JS controlled top for scrolled
            navElement.style.right = '1rem'; // JS controlled right for scrolled
          }
        } else {
          siteHeader.classList.remove('scrolled-header-layout');
          if (navElement) {
            navElement.style.top = '1rem'; // JS controlled top for unscrolled
            navElement.style.right = window.innerWidth <= 480 ? '0.5rem' : '1rem'; // JS controlled right for unscrolled
          }
        }
      });
    }

    let lastKnownScrollY = 0;
    let ticking = false;
    
    // Constants from the old script that are needed by the merged updateHeaderStylesOnScroll
    const siteHeader = document.getElementById('site-header');
    const mainContainer = document.querySelector('main.container');
    const h1Title = siteHeader ? siteHeader.querySelector('h1') : null;
    const titleMainWord = h1Title ? h1Title.querySelector('.title-main-word') : null;
    const titleSecondaryWords = h1Title ? h1Title.querySelector('.title-secondary-words') : null;
    const headerFavicon = h1Title ? h1Title.querySelector('.header-favicon') : null;
    const navElement = siteHeader ? siteHeader.querySelector('nav') : null;

    let initialHeaderHeightVh = 30; 
    const finalHeaderHeightPx = 90; 

    let initialH1FontSizeRem = 3.2; 
    if(h1Title) {
        const rootFontSize = parseFloat(getComputedStyle(document.documentElement).fontSize);
        const computedFontSize = parseFloat(getComputedStyle(h1Title).fontSize);
        if (rootFontSize > 0 && computedFontSize > 0) { 
            initialH1FontSizeRem = computedFontSize / rootFontSize;
        }
    }
    
    const finalH1DesktopFontSizeRem = 3.2; 
    const finalH1MobileFontSizeRem = 1.6;  

    const initialFaviconSizePx = 0; 
    const finalFaviconSizePx = 64;  

    const initialH1ColorHex = "#27296d"; 
    const finalH1ColorHex = "#FFFFFF";   

    const animationScrollStart = 0;
    const animationScrollEnd = 200; 

    let lastKnownSecondaryWordsWidth = 0; 

    function hexToRgb(hex) {
        let r = 0, g = 0, b = 0;
        if (hex.length == 4) { 
            r = parseInt(hex[1] + hex[1], 16);
            g = parseInt(hex[2] + hex[2], 16);
            b = parseInt(hex[3] + hex[3], 16);
        } else if (hex.length == 7) { 
            r = parseInt(hex[1] + hex[2], 16);
            g = parseInt(hex[3] + hex[4], 16);
            b = parseInt(hex[5] + hex[6], 16);
        }
        return [r, g, b];
    }
    
    const initialH1ColorRgb = hexToRgb(initialH1ColorHex);
    const finalH1ColorRgb = hexToRgb(finalH1ColorHex);

    function interpolateValue(start, end, progress) {
        return start + (end - start) * progress;
    }

    function interpolateRgbColor(colorStartRgb, colorEndRgb, progress) {
        const r = Math.round(interpolateValue(colorStartRgb[0], colorEndRgb[0], progress));
        const g = Math.round(interpolateValue(colorStartRgb[1], colorEndRgb[1], progress));
        const b = Math.round(interpolateValue(colorStartRgb[2], colorEndRgb[2], progress));
        return `rgb(${r},${g},${b})`;
    }
    // End of constants needed by merged function

    // New JavaScript function for mobile menu toggle
    function toggleMobileMenu() {
      var linksContainer = document.getElementById("mobile-nav-links");
      var iconElement = document.querySelector(".mobile-menu-icon .fa");
      if (linksContainer.style.display === "block") {
        linksContainer.style.display = "none";
        if(iconElement) iconElement.className = "fa fa-bars"; // Change back to bars
      } else {
        linksContainer.style.display = "block";
        if(iconElement) iconElement.className = "fa fa-times"; // Change to X
      }
    }

    window.addEventListener('scroll', () => {
      lastKnownScrollY = window.scrollY;
      if (!ticking) {
        window.requestAnimationFrame(() => {
          updateHeaderStylesOnScroll(lastKnownScrollY);
          document.body.classList.toggle('scrolled', lastKnownScrollY > 50);
          ticking = false;
        });
        ticking = true;
      }
    });
    
    // Mobile helper class & other event listeners from new script
    document.addEventListener('DOMContentLoaded', () => {
      if (window.matchMedia('(max-width: 600px)').matches) {
        document.body.classList.add('mobile-header-enabled');
      }
      // Call updateHeaderStylesOnScroll on DOMContentLoaded like in old script
      updateHeaderStylesOnScroll(window.scrollY);

      // Remove old JavaScript for mobileMenuToggle and mainNav.classList.toggle
      // const mobileMenuToggle = document.getElementById('mobile-menu-toggle'); // This ID is gone
      // const mainNav = document.getElementById('main-nav'); // mainNav is still there, but #mobile-nav-links is toggled

      // if (mobileMenuToggle && mainNav) { ... } // Old logic removed

      // New: Close menu if a link inside is clicked (for the new structure)
      const mobileNavLinksContainer = document.getElementById('mobile-nav-links');
      if (mobileNavLinksContainer) {
        mobileNavLinksContainer.querySelectorAll('.nav-link').forEach(link => {
          link.addEventListener('click', () => {
            if (mobileNavLinksContainer.style.display === "block") {
              // Check if the icon exists before trying to change it
              const iconElement = document.querySelector(".mobile-menu-icon .fa");
              if (iconElement) {
                 iconElement.className = "fa fa-bars"; // Change back to bars
              }
              mobileNavLinksContainer.style.display = "none";
            }
          });
        });
      }
      
      // New: Close menu if clicked outside (for the new structure)
      // Note: The icon itself has an onclick, so it handles its own toggle.
      // This listener is for clicks *outside* the menu and *not* on the icon.
      document.addEventListener('click', (event) => {
        const mobileMenuIcon = document.querySelector('.mobile-menu-icon');
        if (mobileNavLinksContainer && mobileNavLinksContainer.style.display === 'block') {
          if (!mobileNavLinksContainer.contains(event.target) && !(mobileMenuIcon && mobileMenuIcon.contains(event.target))) {
            mobileNavLinksContainer.style.display = 'none';
            const iconElement = document.querySelector(".mobile-menu-icon .fa");
            if (iconElement) {
              iconElement.className = "fa fa-bars"; // Change back to bars
            }
          }
        }
      });


      // Accordion logic from old script
      const accordionHeaders = document.querySelectorAll('.accordion .acc-header');
      if (accordionHeaders.length > 0) {
          accordionHeaders.forEach(btn => {
            btn.addEventListener('click', () => {
              btn.classList.toggle('active');
              const body = btn.nextElementSibling;
              body.style.maxHeight = btn.classList.contains('active') ? body.scrollHeight + 'px' : '0';
            });
          });
      }

      // Lazy iframe logic from old script
      const lazyIframes = document.querySelectorAll('iframe.lazy-embed');
      if (lazyIframes.length > 0) {
          lazyIframes.forEach(iframe => { 
            if (iframe.classList.contains('skeleton')) { 
                iframe.addEventListener('load', () => {
                    iframe.classList.remove('skeleton');
                    if (typeof AOS !== 'undefined') { 
                      AOS.refresh(); 
                    }
                });
            }
          });
      }
    });

    // Theme switcher logic from old script
    const applySystemTheme = (isDark) => {
        document.documentElement.classList.toggle('dark', isDark);
        if (typeof AOS !== 'undefined') AOS.refreshHard(); 
        let currentBg = getComputedStyle(document.documentElement).getPropertyValue(isDark ? '--bg-dark' : '--bg-light').trim();
        document.querySelectorAll('.separator path').forEach(p => p.style.fill = currentBg);
    };

    const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
    applySystemTheme(prefersDarkScheme.matches); 
    prefersDarkScheme.addEventListener('change', (e) => applySystemTheme(e.matches));
    
    // Resize listener from old script
    window.addEventListener('resize', () => { 
        updateHeaderStylesOnScroll(window.scrollY); 
    });

    // Load listener from old script
    window.addEventListener('load', function() {
      if (typeof AOS !== 'undefined') setTimeout(() => AOS.refreshHard(), 1200); 
      updateHeaderStylesOnScroll(window.scrollY); 
    });

  </script>
  <!-- Any other existing JS scripts remain untouched below -->
</body>
</html>
